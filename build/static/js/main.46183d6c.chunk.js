(this["webpackJsonpgameing-a-toll-admin"]=this["webpackJsonpgameing-a-toll-admin"]||[]).push([[0],{169:function(e,t){},293:function(e,t,n){},379:function(e,t,n){},380:function(e,t,n){},381:function(e,t,n){},382:function(e,t,n){},405:function(e,t,n){},424:function(e,t,n){},425:function(e,t,n){},426:function(e,t,n){},840:function(e,t,n){},841:function(e,t,n){},842:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),s=n(68),r=n.n(s),i=n(67),o=n(29),l=n(19),d=n.n(l),j=n(25),u=n(7),b=n(259),m=n.n(b),h=n(260),O=n.n(h),g=n(261),x=n.n(g),p=(n(293),n.p+"static/media/GamingAtoll .fe80a6bd.png"),f=n(23),v=n(930),S=n(844),w=n(1);function y(e){console.log("Customized snackbars");var t=a.useState({open:e.open,Transition:S.a}),n=Object(u.a)(t,2),c=n[0],s=n[1];return a.useEffect((function(){s({open:e.open,Fade:S.a})}),[e.open]),Object(w.jsxs)("div",{children:[Object(w.jsx)(v.a,{open:c.open,onClose:function(){s(Object(f.a)(Object(f.a)({},c),{},{open:!1}))},TransitionComponent:c.Transition,message:e.message,autoHideDuration:6e3}),")"]})}var C=function(){var e=c.a.useState(),t=Object(u.a)(e,2),n=t[0],s=t[1],r=c.a.useState(),i=Object(u.a)(r,2),l=i[0],b=i[1],h=c.a.useState(!1),g=Object(u.a)(h,2),f=g[0],v=g[1],S=c.a.useState(!1),C=Object(u.a)(S,2),k=C[0],T=C[1],N=c.a.useState("password"),E=Object(u.a)(N,2),I=E[0],A=E[1],R=c.a.useState({state:!1,message:""}),D=Object(u.a)(R,2),W=D[0],_=D[1],G=c.a.useState(!1),P=Object(u.a)(G,2),M=P[0],F=P[1],V=Object(o.f)();Object(a.useEffect)(Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gamingatoll.com/verifyAdmin",{method:"GET",headers:{Authorization:localStorage.accessToken}});case 2:return e.next=4,e.sent.json();case 4:"Authorized"==e.sent.message&&V.push("/");case 6:case"end":return e.stop()}}),e)}))),[]);var L=function(){var e=Object(j.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.stringify({email:n,password:l}),e.next=3,fetch("https://gamingatoll.com/login",{method:"POST",body:t,headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:a=e.sent,_({state:!1,message:""}),a.status&&"admin"==a.user.type?(localStorage.user=JSON.stringify(a.user),localStorage.accessToken=a.accessToken,localStorage.refreshToken=a.refreshToken,_({state:!0,message:a.message}),setTimeout((function(){V.push("/")}),2e3)):_({state:!0,message:"You are not authorized to continue"});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"signup_container",children:[Object(w.jsx)("div",{className:"left-container"}),Object(w.jsx)("div",{className:"right-container",children:Object(w.jsxs)("div",{className:"signup-form",children:[Object(w.jsx)("img",{src:p})," ",Object(w.jsx)("span",{children:"GamingAToll"}),Object(w.jsx)("h2",{children:"Welcome! Sign in"}),Object(w.jsxs)("div",{className:"field",children:[Object(w.jsx)("label",{children:"Email*"}),Object(w.jsx)("input",{placeholder:"Email",type:"email",onChange:function(e){return function(e){var t=e.target.value;m.a.isEmail(t)?(v(!1),s(t)):v(!0)}(e)},style:f?{border:"2px solid red"}:{border:"2px solid whiteSmoke"}}),Object(w.jsx)("br",{})]}),Object(w.jsxs)("div",{className:"field",children:[Object(w.jsx)("label",{children:"Password*"}),Object(w.jsxs)("div",{className:"password-field",children:[Object(w.jsx)("input",{placeholder:"Password",type:I,style:M?{border:"2px solid red"}:{border:"2px solid whiteSmoke"},onChange:function(e){console.log(e.target.value),""==e.target.value&&(F(!0),console.log("white space")),F(!1),b(e.target.value)}}),k?Object(w.jsx)(O.a,{sx:{margiRight:2},onClick:function(){T(!k),A("password")}}):Object(w.jsx)(x.a,{sx:{margiRight:2},onClick:function(){T(!k),A("text")}})]})]}),Object(w.jsx)("div",{className:"btn",children:Object(w.jsx)("button",{onClick:L,children:" Sign In"})})]})}),Object(w.jsx)(y,{open:W.state,message:W.message})]})})},k=n(6);n(379);var T=function(e){var t,n=c.a.useState(!1),s=Object(u.a)(n,2),r=s[0],i=s[1],o=c.a.useState(""),l=Object(u.a)(o,2),d=(l[0],l[1],c.a.useState("")),j=Object(u.a)(d,2),b=(j[0],j[1],Object(a.useRef)(null)),m=(Object(a.useRef)(null),Object(a.useRef)(null),Object(a.useRef)(null),Object(a.useRef)(null),Object(a.useRef)(null),Object(a.useRef)(null),Object(a.useRef)(null));return c.a.useEffect((function(){var e=document.querySelectorAll(".list");console.log(e);for(var t=function(t){e[t].onclick=function(){for(var n=0;n<e.length;)e[n++].className="list";e[t].className="list active"}},n=0;n<e.length;n++)t(n)}),[]),Object(w.jsxs)("div",{ref:m,className:"navigation",children:[Object(w.jsx)("div",{className:"arrow",onClick:function(){i(!r),r?m.current.classList.remove("naactive"):m.current.classList.add("naactive")},children:Object(w.jsx)("ion-icon",{style:r?{transform:"rotate(0deg)"}:{transform:"rotate(180deg)"},name:"chevron-forward-circle-outline"})}),Object(w.jsxs)("ul",{children:[Object(w.jsx)("li",{ref:b,className:"list active",children:Object(w.jsxs)("div",{onClick:function(){e.handleChange("dashboard")},children:[Object(w.jsx)("span",{className:"icon",children:Object(w.jsx)("ion-icon",{name:"home-outline"})}),Object(w.jsx)("span",{className:"title",children:"Dashboard"})]})}),Object(w.jsx)("li",{ref:b,className:"list ",onClick:function(){e.handleChange("gameTime")},children:Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{className:"icon",children:Object(w.jsx)("ion-icon",{name:"game-controller-outline"})}),Object(w.jsx)("span",{className:"title",children:"Game Management"})]})}),Object(w.jsx)("li",{ref:b,className:"list",onClick:function(){e.handleChange("addgame")},children:Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{className:"icon",children:Object(w.jsx)("ion-icon",{name:"time-outline"})}),Object(w.jsx)("span",{className:"title",children:"Schedule Management "})]})}),Object(w.jsx)("li",(t={ref:b,className:"list"},Object(k.a)(t,"className","list"),Object(k.a)(t,"onClick",(function(){e.handleChange("userManagement")})),Object(k.a)(t,"children",Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{className:"icon",children:Object(w.jsx)("ion-icon",{name:"people-outline"})}),Object(w.jsx)("span",{className:"title",children:"User Management"})]})),t)),Object(w.jsx)("li",{ref:b,className:"list",onClick:function(){e.handleChange("transactionManagement")},children:Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{className:"icon",children:Object(w.jsx)("ion-icon",{name:"wallet-outline"})}),Object(w.jsx)("span",{className:"title",children:"Transaction Management"})]})}),Object(w.jsx)("li",{ref:b,className:"list",onClick:function(){e.handleChange("uiManager")},children:Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{className:"icon",children:Object(w.jsx)("ion-icon",{name:"build-outline"})}),Object(w.jsx)("span",{className:"title",children:"UI Manager"})]})}),Object(w.jsx)("li",{ref:b,className:"list",onClick:function(){e.logout(!0)},children:Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{className:"icon",children:Object(w.jsx)("ion-icon",{name:"log-out-outline"})}),Object(w.jsx)("span",{className:"title",children:"Logout"})]})})]})]})},N=(n(380),n(937)),E=n(915);var I=function(){var e=c.a.useState(""),t=Object(u.a)(e,2),n=(t[0],t[1],c.a.useState(!1)),a=Object(u.a)(n,2),s=(a[0],a[1],Object(o.f)());return Object(w.jsx)("div",{className:"header_container",children:Object(w.jsx)("div",{className:"header",children:Object(w.jsxs)("div",{className:"left",children:[Object(w.jsx)("div",{onClick:function(){return s.push("/admin")},children:Object(w.jsx)("ion-icon",{style:{cursor:"pointer",fontSize:"40px",marginRight:15},name:"play-outline"})}),Object(w.jsx)(N.a,{sx:{bgcolor:E.a[500],marginRight:4},children:"A"}),Object(w.jsx)("div",{})]})})})},A=(n(381),n(275)),R=n(945),D=n(949),W=n(948),_=n(944),G=n(946),P=n(928),M=n(947),F=(n(382),n(916)),V=n(943),L=n(942),B=n(936),H=n(918);function K(e){var t=e.handleClose,n=e.confirm;return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(F.a,{open:!0,onClose:t,children:[Object(w.jsx)(H.a,{children:"Confirm"}),Object(w.jsx)(L.a,{sx:{width:420},children:Object(w.jsx)("div",{children:"Are you sure you want to delete ?"})}),Object(w.jsxs)(V.a,{children:[Object(w.jsx)(B.a,{onClick:t,children:"No"}),Object(w.jsx)(B.a,{onClick:n,children:"Yes"})]})]})})}var U="https://gamingatoll.com";function z(e,t){return J.apply(this,arguments)}function J(){return(J=Object(j.a)(d.a.mark((function e(t,n){var a,c,s,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.headers=Object(f.a)(Object(f.a)({},n.headers),{},{"Content-Type":"application/json",Accept:"application/json",Authorization:localStorage.accessToken}),e.next=3,fetch(U+t,n);case 3:return c=e.sent,e.next=6,c.json();case 6:if(void 0!=(c=e.sent).authStatus&&null!=c.authStatus){e.next=9;break}return e.abrupt("return",c);case 9:return console.log("Unauthorized. Trying to refresh session"),s={refreshToken:localStorage.refreshToken},r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},e.next=14,fetch(U+"/refresh_session",r);case 14:return i=e.sent,e.next=17,i.json();case 17:if((i=e.sent).status){e.next=21;break}return console.log("Refresh token is also expired"),e.abrupt("return",null);case 21:return console.log("Session Refreshed"),localStorage.accessToken=i.accessToken,localStorage.refreshToken=i.refreshToken,n.headers=Object(f.a)(Object(f.a)({},n.headers),{},{Authorization:localStorage.accessToken}),e.next=27,fetch(U+t,n);case 27:return a=e.sent,e.next=30,a.json();case 30:return a=e.sent,e.abrupt("return",a);case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=[{id:"image",label:"Image",minWidth:170},{id:"name",label:"Name",minWidth:100},{id:"entryFee",label:"Entry Fee",minWidth:170,align:"right",format:function(e){return e.toLocaleString("en-US")}}];function Z(e){var t=e.data,n=e.updateData,c=a.useState(0),s=Object(u.a)(c,2),r=s[0],i=s[1],o=a.useState(10),l=Object(u.a)(o,2),b=l[0],m=l[1],h=a.useState([]),O=Object(u.a)(h,2),g=O[0],x=O[1],p=a.useState({open:!1,message:""}),f=Object(u.a)(p,2),y=f[0],C=f[1],k=a.useState({Transition:S.a}),T=Object(u.a)(k,2),N=T[0],E=(T[1],a.useState({status:!1,gameId:null})),I=Object(u.a)(E,2),F=I[0],V=I[1];a.useEffect((function(){console.log(t),x(t)}),[t]);var L=function(){var e=Object(j.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F.status){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,z("/deleteGame",{method:"POST",body:JSON.stringify({gameId:F.gameId})});case 4:a=e.sent,C({open:!1,message:""}),C({open:!0,message:a.message}),a.isSuccess&&n(F.gameId),V({status:!1,gameId:null});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(A.a,{sx:{width:"100%",overflow:"hidden"},children:[Object(w.jsx)(_.a,{sx:{maxHeight:440},children:Object(w.jsxs)(R.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(w.jsx)(G.a,{children:Object(w.jsxs)(M.a,{children:[Y.map((function(e){return Object(w.jsx)(W.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)})),Object(w.jsx)(W.a,{align:"right",children:"Delete game"})]})}),Object(w.jsx)(D.a,{children:g.map((function(e){return Object(w.jsxs)(M.a,{hover:!0,role:"checkbox",tabIndex:-1,children:[Y.map((function(t){var n=e[t.id];return"image"==t.id?Object(w.jsx)(W.a,{align:t.align,children:Object(w.jsx)("img",{style:{width:50,borderRadius:"50%"},src:"https://gamingatoll.com/images/game/"+n})},t.id):Object(w.jsx)(W.a,{align:t.align,children:t.format&&"number"===typeof n?t.format(n):n},t.id)})),Object(w.jsx)(W.a,{onClick:function(){V({status:!0,gameId:e._id})},align:"right",children:Object(w.jsx)("ion-icon",{class:"del-icon",name:"trash-outline"})})]},e.code)}))})]})}),Object(w.jsx)(P.a,{rowsPerPageOptions:[10,25,100],component:"div",count:g.length,rowsPerPage:b,page:r,onPageChange:function(e,t){i(t)},onRowsPerPageChange:function(e){m(+e.target.value),i(0)}})]}),F.status&&Object(w.jsx)(K,{handleClose:function(){return V({status:!1,gameId:null})},confirm:L}),Object(w.jsx)(v.a,{open:y.open,TransitionComponent:N.Transition,message:y.message,autoHideDuration:6e3})]})}var X=n(141),q=n(37),Q=n(140);q.d.register(q.a);var $=function(e){var t=e.gameData,n=c.a.useState([t.labels]),s=Object(u.a)(n,2),r=s[0],i=s[1],o=c.a.useState([t.data]),l=Object(u.a)(o,2),d=l[0],j=l[1];Object(a.useEffect)((function(){console.log(r,d),j(t.data),i(t.labels)}),[t]),console.log(r),console.log(d),console.log(t),console.log(t.labels);var b={labels:r,datasets:[{data:d,backgroundColor:["tomato","#4d5bf9","#FDB45C","#949FB1","#4D5360","#AC64AD"],hoverBackgroundColor:["#FF5A5E","#4d5bf9","#FFC870","#A8B3C5","#616774","#DA92DB"]}]};return Object(w.jsxs)(Q.c,{children:[Object(w.jsx)("h2",{className:"mt-5",children:"Mostly Played Game"}),Object(w.jsx)(X.a,{height:200,data:b,options:{responsive:!0}})]})},ee=n(22),te=n(24),ne=n(28),ae=n(27),ce=n(21);q.d.register.apply(q.d,Object(ce.a)(q.k));c.a.Component;var se=function(){var e=c.a.useState({labels:[],data:[]}),t=Object(u.a)(e,2),n=t[0],a=t[1],s=c.a.useState(Object(k.a)({profit:0,creditAmount:0,debitAmount:0},"profit",0)),r=Object(u.a)(s,2),i=r[0],o=r[1];c.a.useEffect(Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/getMostPlayedGames",{method:"GET"});case 2:t=e.sent,console.log(t),a(t);case 5:case"end":return e.stop()}}),e)}))),[]),c.a.useEffect(Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/getMetaTransaction",{method:"GET"});case 2:t=e.sent,console.log(t),o(t);case 5:case"end":return e.stop()}}),e)}))),[]);var l=(new Date).toISOString().slice(0,10);return console.log(l),Object(w.jsxs)("div",{className:"dashboard_container",children:[Object(w.jsx)("h1",{children:"Dashboard"}),Object(w.jsxs)("div",{className:"match",children:[Object(w.jsx)("h2",{children:"Statistics"}),Object(w.jsx)("h2",{children:(new Date).toLocaleDateString()})]}),Object(w.jsxs)("div",{className:"box",children:[Object(w.jsxs)("div",{className:"sub_box",children:[Object(w.jsx)("div",{children:"Profit"}),Object(w.jsx)("h2",{children:i.profit})]}),Object(w.jsxs)("div",{className:"sub_box",children:[Object(w.jsx)("div",{style:{textAlign:"center"},children:"Amount Credited"}),Object(w.jsx)("h2",{children:i.creditAmount})]}),Object(w.jsxs)("div",{className:"sub_box",children:[Object(w.jsx)("div",{children:"Amount Debited"}),Object(w.jsx)("h2",{children:i.debitAmount})]}),Object(w.jsxs)("div",{className:"sub_box",children:[Object(w.jsx)("div",{children:"Games Played"}),Object(w.jsx)("h2",{children:i.totalGame})]})]}),Object(w.jsx)("div",{className:"graph",children:Object(w.jsx)("div",{style:{width:"50%"},children:Object(w.jsx)($,{gameData:n})})})]})},re=n(926),ie=n(956),oe=n(959),le=n(939),de=n(954),je=n(957),ue=n(958),be=n(955),me=n(90),he=n.n(me),Oe=n(933),ge=n(940),xe=n(932),pe=n(929),fe=n(941),ve=n(927),Se=n(924),we=n(920),ye=n(919),Ce=n(925),ke=(n(405),n(953)),Te=Object(re.a)({table:{minWidth:650}});function Ne(){var e=Te(),t=c.a.useState(!1),n=Object(u.a)(t,2),a=n[0],s=n[1],r=c.a.useState([]),i=Object(u.a)(r,2),o=i[0],l=i[1],b=c.a.useState([]),m=Object(u.a)(b,2),h=m[0],O=m[1],g=c.a.useState({open:!1,message:""}),x=Object(u.a)(g,2),p=x[0],y=x[1],C=c.a.useState({status:!1,day:null,startTime:null,endTime:null}),k=Object(u.a)(C,2),T=k[0],N=k[1],E=c.a.useState(""),I=Object(u.a)(E,2),A=(I[0],I[1],c.a.useState(!0)),R=Object(u.a)(A,2),D=R[0],W=R[1],_=c.a.useState({Transition:S.a}),G=Object(u.a)(_,2),P=G[0];G[1];c.a.useEffect(Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gamingatoll.com/games",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:(t=e.sent).status&&l(t.games);case 7:case"end":return e.stop()}}),e)}))),[]),c.a.useEffect(Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/schedules",{method:"GET"});case 2:t=e.sent,W(!1),t.isSuccess&&(O(t.data),s(!1));case 5:case"end":return e.stop()}}),e)}))),[]);var M=function(){console.log("click"),console.log(a);var e=c.a.useState(""),t=Object(u.a)(e,2),n=t[0],r=t[1],i=c.a.useState(""),l=Object(u.a)(i,2),b=l[0],m=l[1],g=c.a.useState({gameId:null,day:null,startTime:null,endTime:null,commission:null}),x=Object(u.a)(g,2),p=x[0],v=x[1],S=c.a.useState(null),C=Object(u.a)(S,2),k=C[0],T=C[1],N=c.a.useState(null),E=Object(u.a)(N,2),I=E[0],A=E[1],R=function(){s(!1)},D=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p.startTime>=p.endTime)){e.next=4;break}return y({open:!1,message:""}),y({open:!0,message:"Timings should be correct"}),e.abrupt("return");case 4:return e.next=6,z("/updateSchedule",{method:"POST",body:JSON.stringify({gameId:p.gameId,startTime:p.startTime+":00",endTime:p.endTime+":00",commission:p.commission,day:p.day})});case 6:t=e.sent,y({open:!1,message:""}),y({open:!0,message:t.message}),t.isSuccess&&O([].concat(Object(ce.a)(h),[t.data])),s(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(F.a,{open:a,onClose:R,children:[Object(w.jsx)(H.a,{children:"Game A Toll"}),Object(w.jsx)("div",{style:{width:"90%",margin:"auto",border:"0.5px solid whitesmoke"}}),Object(w.jsxs)(L.a,{sx:{width:420},children:[Object(w.jsxs)("div",{classsName:"time",children:[Object(w.jsx)(ge.a,{sx:{minWidth:120,marginBottom:2},children:Object(w.jsxs)(fe.a,{fullWidth:!0,children:[Object(w.jsx)(xe.a,{id:"demo-simple-select-label",sx:{width:"100ch"},children:"Select Game"}),Object(w.jsx)(ve.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:n,label:"Select Game",onChange:function(e){r(e.target.value),v(Object(f.a)(Object(f.a)({},p),{},{gameId:e.target.value}))},children:o.map((function(e){return Object(w.jsx)(pe.a,{value:e._id,children:e.name})}))})]})}),Object(w.jsx)(ge.a,{sx:{minWidth:120,marginBottom:2},children:Object(w.jsxs)(fe.a,{fullWidth:!0,children:[Object(w.jsx)(xe.a,{id:"demo-simple-select-label",sx:{width:"100ch"},children:"Select Day"}),Object(w.jsx)(ve.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:b,label:"Select Day",onChange:function(e){m(e.target.value),v(Object(f.a)(Object(f.a)({},p),{},{day:e.target.value}))},children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((function(e){return Object(w.jsx)(pe.a,{value:e.toLowerCase(),children:e})}))})]})})]}),Object(w.jsx)(Oe.a,{id:"full-width-text-field",label:"Commission",value:p.commission,onChange:function(e){return v(Object(f.a)(Object(f.a)({},p),{},{commission:e.target.value}))},placeholder:"Commission",margin:"normal",fullWidth:!0}),Object(w.jsx)("div",{className:"time",children:Object(w.jsx)(ye.b,{dateAdapter:Se.a,children:Object(w.jsx)(we.a,{spacing:3,children:Object(w.jsx)(Ce.a,{label:"Game Time Start",value:I,onChange:function(e){var t=new Date(e),n=(1==String(t.getHours()).length?"0"+t.getHours():t.getHours())+":"+(1==String(t.getMinutes()).length?"0"+t.getMinutes():t.getMinutes());v(Object(f.a)(Object(f.a)({},p),{},{startTime:n})),A(e)},ampm:!1,renderInput:function(e){return Object(w.jsx)(Oe.a,Object(f.a)({},e))}})})})}),Object(w.jsx)("div",{className:"time",children:Object(w.jsx)(ye.b,{dateAdapter:Se.a,children:Object(w.jsx)(we.a,{spacing:3,children:Object(w.jsx)(Ce.a,{label:"Game Time End",value:k,onChange:function(e){var t=new Date(e),n=(1==String(t.getHours()).length?"0"+t.getHours():t.getHours())+":"+(1==String(t.getMinutes()).length?"0"+t.getMinutes():t.getMinutes());v(Object(f.a)(Object(f.a)({},p),{},{endTime:n})),T(e)},ampm:!1,renderInput:function(e){return Object(w.jsx)(Oe.a,Object(f.a)({},e))}})})})})]}),Object(w.jsxs)(V.a,{children:[Object(w.jsx)(B.a,{onClick:R,children:"Cancel"}),Object(w.jsx)(B.a,{onClick:D,children:"Submit"})]})]})})},U=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.status){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,z("/deleteSchedule",{method:"POST",body:JSON.stringify({day:T.day,startTime:T.startTime,endTime:T.endTime})});case 4:t=e.sent,y({open:!1,message:""}),y({open:!0,message:t.message}),t.isSuccess&&(n=h.filter((function(e){return!(e.day==T.day&&e.startTime==T.startTime&&e.endTime==T.endTime)})),O(n),N({status:!1,day:null,startTime:null,endTime:null}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{style:{width:"80%",margin:"auto"},children:[Object(w.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(w.jsx)("h2",{children:"Schedule Management"}),Object(w.jsx)("div",{title:"Add Game",onClick:function(){s(!0),console.log("add game popup")},children:Object(w.jsx)(he.a,{sx:{fontSize:35,cursor:"pointer"}})})]}),D?Object(w.jsx)(ke.a,{style:{position:"absolute",top:"49%",left:"49%"}}):Object(w.jsx)(de.a,{component:be.a,children:Object(w.jsxs)(ie.a,{className:e.table,"aria-label":"simple table",children:[Object(w.jsx)(je.a,{children:Object(w.jsxs)(ue.a,{children:[Object(w.jsx)(le.a,{align:"center",children:"Day"}),Object(w.jsx)(le.a,{align:"center",children:"Game"}),Object(w.jsx)(le.a,{align:"center",children:"Start Time"}),Object(w.jsx)(le.a,{align:"center",children:"End Time"}),Object(w.jsx)(le.a,{align:"center",children:"Commission"}),Object(w.jsx)(le.a,{align:"center",children:"Delete"})]})}),Object(w.jsx)(oe.a,{children:h.map((function(e){return Object(w.jsxs)(ue.a,{children:[Object(w.jsx)(le.a,{component:"th",align:"center",scope:"row",children:e.day}),Object(w.jsx)(le.a,{align:"center",children:e.gameName}),Object(w.jsx)(le.a,{align:"center",children:e.startTime}),Object(w.jsx)(le.a,{align:"center",children:e.endTime}),Object(w.jsx)(le.a,{align:"center",children:e.commission}),Object(w.jsx)(le.a,{onClick:function(){N({status:!0,day:e.day,startTime:e.startTime,endTime:e.endTime})},align:"center",children:Object(w.jsx)("ion-icon",{class:"del-icon",name:"trash-outline"})})]},e.day)}))})]})}),T.status&&Object(w.jsx)(K,{handleClose:function(){return N({status:!1,day:null,startTime:null,endTime:null})},confirm:U}),a&&Object(w.jsx)(M,{}),Object(w.jsx)(v.a,{open:p.open,TransitionComponent:P.Transition,message:p.message,autoHideDuration:6e3})]})}var Ee=n(137),Ie=n.n(Ee),Ae=n(138),Re=n.n(Ae);function De(e){console.log(e);var t=a.useState(!1),n=Object(u.a)(t,2),c=n[0],s=n[1],r=a.useState(""),i=Object(u.a)(r,2),o=(i[0],i[1],a.useState([])),l=Object(u.a)(o,2),b=l[0],m=l[1],h=a.useState(new Date("2018-01-01T00:00:00.000Z")),O=Object(u.a)(h,2);O[0],O[1];a.useEffect(Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gamingatoll.com/games",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:(t=e.sent).status&&m(t.games);case 7:case"end":return e.stop()}}),e)}))),[]);var g=function(){var e=a.useState({open:!1,message:""}),t=Object(u.a)(e,2),n=t[0],r=t[1],i=a.useState([]),o=Object(u.a)(i,2),l=o[0],b=o[1],h=a.useState({name:"",image:"",entryFee:10}),O=Object(u.a)(h,2),g=O[0],x=O[1],p=a.useState({Transition:S.a}),y=Object(u.a)(p,2),C=y[0],k=(y[1],function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(l[0].file),(t=new FormData).append("file",l[0].file),e.next=5,Re.a.post("https://gamingatoll.com/uploadGameImage",t);case 5:return n=e.sent,x(Object(f.a)(Object(f.a)({},g),{},{image:n.data.name})),b([]),e.abrupt("return",n.data.name);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),T=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:return t=e.sent,e.next=5,z("/saveGame",{method:"POST",body:JSON.stringify(Object(f.a)(Object(f.a)({},g),{},{image:t}))});case 5:n=e.sent,r({open:!1,message:""}),r({open:!0,message:n.message}),n.isSuccess&&(m((function(e){return[].concat(Object(ce.a)(e),[n.newGame])})),s(!1),x({name:"",image:"",entryFee:null}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){s(!1)};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(F.a,{open:c,onClose:N,children:[Object(w.jsx)(H.a,{children:"Add Game"}),Object(w.jsxs)(L.a,{sx:{width:420},children:[Object(w.jsx)(Oe.a,{id:"full-width-text-field",label:"Game name",placeholder:"Game name",margin:"normal",value:g.name,onChange:function(e){return x(Object(f.a)(Object(f.a)({},g),{},{name:e.target.value}))},fullWidth:!0}),Object(w.jsx)(Ie.a,{multiple:!0,value:l,onChange:function(e,t){console.log(e,t),b(e)},maxNumber:1,dataURLKey:"data_url",children:function(e){var t=e.imageList,n=e.onImageUpload,a=(e.onImageRemoveAll,e.onImageUpdate,e.onImageRemove),c=e.isDragging,s=e.dragProps;return Object(w.jsxs)("div",{className:"upload__image-wrapper",style:{border:"1px dashed black"},children:[0==t.length&&Object(w.jsx)("div",Object(f.a)(Object(f.a)({style:c?{backgroundColor:"whitesmoke",textAlign:"center",cursor:"pointer",padding:"20px"}:{textAlign:"center",cursor:"pointer",padding:"20px"},onClick:n},s),{},{children:"Click or drop here"})),t.map((function(e,t){return Object(w.jsxs)("div",{className:"image-item",style:{textAlign:"center"},children:[Object(w.jsx)("img",{src:e.data_url,alt:"",width:"100"}),Object(w.jsx)("div",{className:"image-item__btn-wrapper",children:Object(w.jsx)(B.a,{onClick:function(){return a(t)},children:"Remove"})})]},t)}))]})}})]}),Object(w.jsxs)(V.a,{children:[Object(w.jsx)(B.a,{onClick:N,children:"Cancel"}),Object(w.jsx)(B.a,{onClick:T,children:"Submit"})]})]}),Object(w.jsx)(v.a,{open:n.open,TransitionComponent:C.Transition,message:n.message,autoHideDuration:6e3})]})};return Object(w.jsxs)("div",{style:{width:"80%",margin:"auto"},children:[Object(w.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(w.jsx)("h2",{children:"Game Management"}),Object(w.jsx)("div",{title:"Add Game",onClick:function(){s(!0),console.log("add game popup")},children:Object(w.jsx)(he.a,{sx:{fontSize:35,cursor:"pointer"}})})]}),Object(w.jsx)(Z,{data:b,updateData:function(e){var t=b.filter((function(t){return t._id!==e}));m(t)}}),c&&Object(w.jsx)(g,{})]})}var We=n(960),_e=n(952),Ge=n(854),Pe=n(268),Me=n.n(Pe),Fe=n(267),Ve=n.n(Fe);function Le(e){var t,n=e.row,c=a.useState(!1),s=Object(u.a)(c,2),r=s[0],i=s[1],o=function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n.target),t.next=3,z("/updateUserStatus",{method:"POST",body:JSON.stringify({userId:n.target.name,status:n.target.value})});case 3:t.sent,e.updateRow(n.target.value);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(w.jsxs)(a.Fragment,{children:[Object(w.jsxs)(M.a,{sx:{"& > *":{borderBottom:"unset"}},children:[Object(w.jsx)(W.a,{children:Object(w.jsx)(_e.a,{"aria-label":"expand row",size:"small",onClick:function(){return i(!r)},children:r?Object(w.jsx)(Ve.a,{}):Object(w.jsx)(Me.a,{})})}),Object(w.jsx)(W.a,{align:"center",component:"th",scope:"row",children:Object(w.jsx)("img",{style:{height:50},src:"https://gamingatoll.com/images/user/"+n.user.image})}),Object(w.jsx)(W.a,{align:"center",children:n.user.username}),Object(w.jsx)(W.a,{align:"center",children:n.user.amount}),Object(w.jsx)(W.a,{align:"center",children:(t=n.user.createdAt,new Date(t).toLocaleDateString())}),Object(w.jsx)(W.a,{align:"center",children:Object(w.jsx)(ge.a,{sx:{minWidth:120,marginBottom:2},children:Object(w.jsxs)(fe.a,{fullWidth:!0,children:[Object(w.jsx)(xe.a,{id:"demo-simple-select-label",sx:{width:"10ch"},children:"User Status"}),Object(w.jsxs)(ve.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:n.user.status,label:"Select User Status",onChange:function(e){o(e)},name:n.user._id,children:[Object(w.jsx)(pe.a,{value:"confirmed",children:"Confirmed"}),Object(w.jsx)(pe.a,{value:"notconfirmed",children:"Not Confirmed"}),Object(w.jsx)(pe.a,{value:"blocked",children:"Blocked"})]})]})})})]}),Object(w.jsx)(M.a,{children:Object(w.jsx)(W.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:Object(w.jsx)(We.a,{in:r,timeout:"auto",unmountOnExit:!0,children:Object(w.jsxs)(ge.a,{sx:{margin:1},children:[Object(w.jsx)(Ge.a,{variant:"h6",gutterBottom:!0,component:"div",children:"Match History"}),Object(w.jsxs)(R.a,{size:"small","aria-label":"purchases",children:[Object(w.jsx)(G.a,{children:Object(w.jsxs)(M.a,{children:[Object(w.jsx)(W.a,{align:"center",children:"S.No."}),Object(w.jsx)(W.a,{align:"center",children:"Opponent"}),Object(w.jsx)(W.a,{align:"center",children:"Game"}),Object(w.jsx)(W.a,{align:"center",children:"Status"})]})}),Object(w.jsxs)(D.a,{children:[0==n.history.length&&Object(w.jsxs)(w.Fragment,{children:[" ",Object(w.jsxs)(M.a,{children:[Object(w.jsx)(W.a,{align:"center"}),Object(w.jsx)(W.a,{align:"right",children:"No History"}),Object(w.jsx)(W.a,{align:"center"}),Object(w.jsx)(W.a,{align:"center"})]})," "]}),n.history.map((function(e,t){return Object(w.jsxs)(M.a,{children:[Object(w.jsx)(W.a,{align:"center",children:t+1}),Object(w.jsx)(W.a,{align:"center",component:"th",scope:"row",children:e.opponent}),Object(w.jsx)(W.a,{align:"center",children:e.gameName}),Object(w.jsx)(W.a,{align:"center",children:e.status?"WON":"LOSE"})]},e.opponent)}))]})]})]})})})})]})}function Be(e){var t=e.data,n=a.useState([]),c=Object(u.a)(n,2),s=c[0],r=c[1];return a.useEffect((function(){r(t)}),[t]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(_.a,{component:A.a,children:Object(w.jsxs)(R.a,{"aria-label":"collapsible table",children:[Object(w.jsx)(G.a,{children:Object(w.jsxs)(M.a,{children:[Object(w.jsx)(W.a,{}),Object(w.jsx)(W.a,{align:"center",children:"Profile Image"}),Object(w.jsx)(W.a,{align:"center",children:"Name"}),Object(w.jsx)(W.a,{align:"center",children:"Credit"}),Object(w.jsx)(W.a,{align:"center",children:"Date of Joining"}),Object(w.jsx)(W.a,{align:"center",children:"Status"})]})}),Object(w.jsx)(D.a,{children:s.map((function(e){return Object(w.jsx)(Le,{row:e,updateRow:function(t){var n=s;n=n.map((function(n){return n.user._id==e.user._id&&(n.user.status=t),n})),console.log(n),r(n)}},e.user._id)}))})]})}),Object(w.jsx)("div",{style:{marginBottom:100}})]})}n(424);var He=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!0),r=Object(u.a)(s,2),i=r[0],o=r[1];return Object(a.useEffect)(Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/users",{method:"GET"});case 2:t=e.sent,c(t.data),o(!1);case 5:case"end":return e.stop()}}),e)}))),[]),Object(w.jsxs)("div",{className:"user_management_container",children:[Object(w.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:Object(w.jsx)("h1",{children:"User Management"})}),i?Object(w.jsx)(ke.a,{style:{position:"absolute",top:"49%",left:"49%"}}):Object(w.jsx)(Be,{data:n})]})};n.p,n(425);var Ke=function(){var e=c.a.useState(!1),t=Object(u.a)(e,2),n=t[0],s=t[1],r=c.a.useState(!1),i=Object(u.a)(r,2),o=(i[0],i[1],c.a.useState({heading:[],image:""})),l=Object(u.a)(o,2),b=l[0],m=l[1],h=c.a.useState({open:!1,message:""}),O=Object(u.a)(h,2),g=(O[0],O[1]);function x(){var e=c.a.useState(""),t=Object(u.a)(e,2),a=t[0],r=t[1],i=c.a.useState([]),o=Object(u.a)(i,2),l=o[0],b=o[1],h=function(){s(!1)},O=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(l[0].file),(t=new FormData).append("file",l[0].file),e.next=5,Re.a.post("https://gamingatoll.com/uploadBannerImage",t);case 5:return n=e.sent,b([]),e.abrupt("return",n.data.name);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return t=e.sent,e.next=5,z("/changeBanner",{method:"POST",body:JSON.stringify({image:t,heading:a})});case 5:n=e.sent,g({open:!1,message:""}),g({open:!0,message:n.message}),n.isSuccess&&(s(!1),m({heading:a.split("\n"),image:t}),r(""));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(F.a,{open:n,onClose:h,children:[Object(w.jsxs)(L.a,{sx:{width:420},children:[Object(w.jsx)(H.a,{children:"Banner"}),Object(w.jsx)(Oe.a,{multiline:!0,id:"full-width-text-field",label:"Banner Heading",value:a,onChange:function(e){r(e.target.value)},placeholder:"Banner Heading",margin:"normal",fullWidth:!0}),Object(w.jsx)(Ie.a,{multiple:!0,value:l,onChange:function(e,t){console.log(e,t),b(e)},maxNumber:1,dataURLKey:"data_url",children:function(e){var t=e.imageList,n=e.onImageUpload,a=(e.onImageRemoveAll,e.onImageUpdate,e.onImageRemove),c=e.isDragging,s=e.dragProps;return Object(w.jsxs)("div",{className:"upload__image-wrapper",style:{border:"1px dashed black"},children:[0==t.length&&Object(w.jsx)("div",Object(f.a)(Object(f.a)({style:c?{backgroundColor:"whitesmoke",textAlign:"center",cursor:"pointer",padding:"20px"}:{textAlign:"center",cursor:"pointer",padding:"20px"},onClick:n},s),{},{children:"Click or drop here"})),t.map((function(e,t){return Object(w.jsxs)("div",{className:"image-item",style:{textAlign:"center"},children:[Object(w.jsx)("img",{src:e.data_url,alt:"",width:"100"}),Object(w.jsx)("div",{className:"image-item__btn-wrapper",children:Object(w.jsx)(B.a,{onClick:function(){return a(t)},children:"Remove"})})]},t)}))]})}})]}),Object(w.jsxs)(V.a,{children:[Object(w.jsx)(B.a,{onClick:h,children:"Cancel"}),Object(w.jsx)(B.a,{onClick:x,children:"Save"})]})]})})}return Object(a.useEffect)(Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/banner",{method:"GET"});case 2:t=e.sent,m(t.data);case 4:case"end":return e.stop()}}),e)}))),[]),Object(w.jsxs)("div",{className:"ui_container",children:[Object(w.jsx)("div",{children:Object(w.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(w.jsx)("h2",{children:"Banner Image"}),Object(w.jsx)("div",{title:"Add Game",onClick:function(){s(!0),console.log("add game popup")},children:Object(w.jsx)(he.a,{sx:{fontSize:35,cursor:"pointer"}})})]})}),Object(w.jsx)("div",{className:"curent_banner",children:Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"banner_text",children:Object(w.jsx)("h1",{children:b.heading.map((function(e,t){return Object(w.jsxs)(w.Fragment,{children:[e,Object(w.jsx)("br",{})]})}))})}),Object(w.jsx)("div",{className:"banner_image",children:Object(w.jsx)("img",{src:"https://gamingatoll.com/images/ui/"+b.image})})]})}),n&&Object(w.jsx)(x,{}),Object(w.jsx)("div",{style:{marginBottom:100}})]})},Ue=[{id:"email",align:"left",label:"Email",minWidth:170},{id:"sessionId",align:"center",label:"Transaction ID",minWidth:100},{id:"updatedAt",label:"Date",minWidth:170,align:"center",format:function(e){return e.toLocaleString("en-US")}},{id:"amount",label:"Amount",minWidth:170,align:"center",format:function(e){return e.toLocaleString("en-US")}},{id:"type",label:"Status",minWidth:170,align:"center",format:function(e){return e.toFixed(2)}}];function ze(e){var t=e.transactionData,n=a.useState(0),c=Object(u.a)(n,2),s=c[0],r=c[1],i=a.useState(10),o=Object(u.a)(i,2),l=o[0],d=o[1],j=a.useState([t]),b=Object(u.a)(j,2),m=b[0],h=b[1];return a.useEffect((function(){console.log(t),h(t)}),[t]),Object(w.jsxs)(A.a,{sx:{width:"100%",overflow:"hidden"},children:[Object(w.jsx)(_.a,{sx:{maxHeight:440},children:Object(w.jsxs)(R.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(w.jsx)(G.a,{children:Object(w.jsx)(M.a,{children:Ue.map((function(e){return Object(w.jsx)(W.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(w.jsx)(D.a,{children:m.slice(s*l,s*l+l).map((function(e){return Object(w.jsx)(M.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Ue.map((function(t){var n=e[t.id];return Object(w.jsx)(W.a,{align:t.align,children:"updatedAt"==t.id?new Date(n).toLocaleDateString():t.format&&"number"===typeof n?t.format(n):null!==n&&void 0!==n?n:"N/A"},t.id)}))},e.code)}))})]})}),Object(w.jsx)(P.a,{rowsPerPageOptions:[10,25,100],component:"div",count:m.length,rowsPerPage:l,page:s,onPageChange:function(e,t){r(t)},onRowsPerPageChange:function(e){d(+e.target.value),r(0)}})]})}n(426);var Je=function(){var e=a.useState([]),t=Object(u.a)(e,2),n=t[0],c=t[1],s=a.useState(new Date("2014-08-18T21:11:54")),r=Object(u.a)(s,2);return r[0],r[1],a.useEffect(Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gamingatoll.com/transaction",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:t=e.sent,c(t.transaction),console.log(t.transaction);case 8:case"end":return e.stop()}}),e)}))),[]),Object(w.jsxs)("div",{className:"transaction_container",children:[Object(w.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:Object(w.jsx)("h1",{children:"Transaction Management"})}),Object(w.jsx)(ze,{transactionData:n})]})};var Ye=function(e){var t=c.a.useState(e.openLogout),n=Object(u.a)(t,2),a=n[0],s=n[1],r=function(){s(!1)};return Object(w.jsx)("div",{children:Object(w.jsxs)(F.a,{open:a,onClose:r,children:[Object(w.jsx)(H.a,{children:"Logout"}),Object(w.jsx)(L.a,{sx:{width:420},children:Object(w.jsx)("div",{children:"Are you sure you want to Logout ?"})}),Object(w.jsxs)(V.a,{children:[Object(w.jsx)(B.a,{onClick:r,children:"No"}),Object(w.jsx)(B.a,{onClick:function(){localStorage.clear(),s(!1),window.location.href="/signin"},children:"Yes"})]})]})})};var Ze=function(e){var t=c.a.useState("dashboard"),n=Object(u.a)(t,2),s=(n[0],n[1]),r=c.a.useState(!0),i=Object(u.a)(r,2),l=i[0],b=i[1],m=c.a.useState(!1),h=Object(u.a)(m,2),O=h[0],g=h[1],x=c.a.useState(!1),p=Object(u.a)(x,2),f=p[0],v=p[1],S=c.a.useState(!1),y=Object(u.a)(S,2),C=y[0],k=y[1],N=c.a.useState(!1),E=Object(u.a)(N,2),A=E[0],R=E[1],D=c.a.useState(!1),W=Object(u.a)(D,2),_=(W[0],W[1],Object(o.f)());Object(a.useEffect)(Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gamingatoll.com/verifyAdmin",{method:"GET",headers:{Authorization:localStorage.accessToken}});case 2:return e.next=4,e.sent.json();case 4:"Authorized"!=e.sent.message&&_.push("/signin");case 6:case"end":return e.stop()}}),e)}))),[]);var G=c.a.useState(!1),P=Object(u.a)(G,2),M=P[0],F=P[1],V=c.a.useState(!1),L=Object(u.a)(V,2),B=L[0],H=L[1],K=function(e,t){console.log(e),s(e),"dashboard"==e?(b(!0),g(!1),v(!1),k(!1),F(!1),H(!1),R(!1)):"gameTime"==e?(b(!1),g(!0),v(!1),k(!1),F(!1),H(!1),R(!1)):"addgame"==e?(b(!1),g(!1),k(!1),F(!1),v(!0),H(!1),R(!1)):"userManagement"==e?(b(!1),g(!1),v(!1),F(!1),H(!1),R(!1),k(!0)):"uiManager"==e?(b(!1),g(!1),v(!1),k(!1),H(!1),R(!1),F(!0)):"transactionManagement"==e&&(b(!1),g(!1),v(!1),k(!1),F(!1),H(!0),R(!1))};return Object(w.jsxs)("div",{children:[Object(w.jsx)(T,{handleChange:K,logout:function(e){R(e)}}),Object(w.jsx)(I,{}),l&&Object(w.jsx)(se,{}),O&&Object(w.jsx)(De,{handleChange:K}),f&&Object(w.jsx)(Ne,{handleChange:K}),C&&Object(w.jsx)(He,{handleChange:K}),M&&Object(w.jsx)(Ke,{handleChange:K}),B&&Object(w.jsx)(Je,{handleChange:K}),A&&Object(w.jsx)(Ye,{openLogout:A})]})},Xe=n(180),qe=n.n(Xe),Qe=n(181);function $e(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function et(e){var t=e.channel,n=e.batch,c=Object(a.useRef)(null),s={signalingClient:null,remoteStreams:[],remoteView:null,channelName:t+"-batch-"+n,peerConnectionStatsInterval:null},r={region:"us-east-2",accessKeyId:"AKIATZ6B4KZG2K37YTAD",secretAccessKey:"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",sessionToken:"",endpoint:"https://kinesisvideo.us-east-2.amazonaws.com",sendVideo:!0,clientId:$e()};function i(){return i=Object(j.a)(d.a.mark((function e(){var t,n,a,i,o,l,u,b,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.clientId=$e(),s.remoteView=c.current,t=new qe.a.KinesisVideo({region:r.region,accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken,endpoint:r.endpoint,correctClockSkew:!0}),e.next=5,t.describeSignalingChannel({ChannelName:s.channelName}).promise();case 5:return n=e.sent,a=n.ChannelInfo.ChannelARN,console.log("[VIEWER] Channel ARN: ",a),e.next=10,t.getSignalingChannelEndpoint({ChannelARN:a,SingleMasterChannelEndpointConfiguration:{Protocols:["WSS","HTTPS"],Role:"VIEWER"}}).promise();case 10:return i=e.sent,o=i.ResourceEndpointList.reduce((function(e,t){return e[t.Protocol]=t.ResourceEndpoint,e}),{}),console.log("[VIEWER] Endpoints: ",o),l=new qe.a.KinesisVideoSignalingChannels({region:r.region,accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken,endpoint:o.HTTPS,correctClockSkew:!0}),e.next=16,l.getIceServerConfig({ChannelARN:a}).promise();case 16:u=e.sent,(b=[]).push({urls:"stun:stun.kinesisvideo.".concat(r.region,".amazonaws.com:443")}),u.IceServerList.forEach((function(e){return b.push({urls:e.Uris,username:e.Username,credential:e.Password})})),console.log("[VIEWER] ICE servers: ",b),s.signalingClient=new Qe.SignalingClient({channelARN:a,channelEndpoint:o.WSS,clientId:r.clientId,role:Qe.Role.VIEWER,region:r.region,credentials:{accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken},systemClockOffset:t.config.systemClockOffset}),{video:{width:{ideal:1280},height:{ideal:720}},audio:!0},m={iceServersViewer:b,iceTransportPolicy:"all"},s.peerConnection=new RTCPeerConnection(m),s.peerConnectionStatsInterval=setInterval((function(){return s.peerConnection.getStats().then((function(){}))}),1e3),s.signalingClient.on("open",Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[VIEWER] Connected to signaling service"),console.log("[VIEWER] Creating SDP offer"),e.t0=s.peerConnection,e.next=5,s.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});case 5:return e.t1=e.sent,e.next=8,e.t0.setLocalDescription.call(e.t0,e.t1);case 8:console.log("[VIEWER] Sending SDP offer"),s.signalingClient.sendSdpOffer(s.peerConnection.localDescription),console.log("[VIEWER] Generating ICE candidates");case 11:case"end":return e.stop()}}),e)})))),s.signalingClient.on("sdpAnswer",function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[VIEWER] Received SDP answer"),e.next=3,s.peerConnection.setRemoteDescription(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s.signalingClient.on("iceCandidate",(function(e){console.log("[VIEWER] Received ICE candidate"),s.peerConnection.addIceCandidate(e)})),s.signalingClient.on("close",(function(){console.log("[VIEWER] Disconnected from signaling channel")})),s.signalingClient.on("error",(function(e){console.error("[VIEWER] Signaling client error: ",e)})),s.peerConnection.addEventListener("icecandidate",(function(e){var t=e.candidate;t&&(console.log("[VIEWER] Generated ICE candidate"),console.log("[VIEWER] Sending ICE candidate"),s.signalingClient.sendIceCandidate(t))})),s.peerConnection.addEventListener("track",(function(e){console.log("[VIEWER] Received remote track"),s.remoteView.srcObject?console.log("RETURNING...."):(s.remoteStream=e.streams[0],s.remoteView.srcObject=e.streams[0])})),console.log("[VIEWER] Starting viewer connection"),s.signalingClient.open();case 36:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return Object(a.useEffect)((function(){!function(){i.apply(this,arguments)}()}),[]),Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("video",{ref:c,autoPlay:!0,playsInline:!0})})}n(840);var tt=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(null),i=Object(u.a)(r,2),o=i[0],l=i[1];return Object(a.useEffect)(Object(j.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z("/getActiveMatch",{method:"GET"});case 2:(n=t.sent).status&&(s(!0),e.callback(n.message));case 4:case"end":return t.stop()}}),t)}))),[]),Object(a.useEffect)(Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/newViewer",{method:"GET"});case 2:if((t=e.sent).status){e.next=5;break}return e.abrupt("return");case 5:l(t.message);case 6:case"end":return e.stop()}}),e)}))),[]),c&&null!=o?Object(w.jsxs)("div",{className:"viewer_view",style:e.style,children:[Object(w.jsxs)("div",{className:"visitor_viewer",children:[Object(w.jsx)("div",{className:"viewer_screen",children:Object(w.jsx)(et,{channel:"game-a-toll-screen-one",batch:o})}),Object(w.jsx)("div",{className:"viewer_camera_one",children:Object(w.jsx)(et,{channel:"game-a-toll-camera-one",batch:o})})]}),Object(w.jsxs)("div",{className:"visitor_viewer",children:[Object(w.jsx)("div",{className:"viewer_screen",children:Object(w.jsx)(et,{channel:"game-a-toll-screen-two",batch:o})}),Object(w.jsx)("div",{className:"viewer_camera_two",children:Object(w.jsx)(et,{channel:"game-a-toll-camera-two",batch:o})})]})]}):Object(w.jsx)("div",{className:"alert_center",children:"There is no active match on the server."})};n(841);function nt(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),r=Object(u.a)(s,2),i=r[0],l=r[1],b=Object(a.useState)(!1),m=Object(u.a)(b,2),h=m[0],O=m[1],g=Object(a.useState)(!1),x=Object(u.a)(g,2),p=x[0],v=x[1],S=Object(a.useState)(""),C=Object(u.a)(S,2),k=C[0],T=C[1],N=Object(o.f)();Object(a.useEffect)(Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gamingatoll.com/verifyAdmin",{method:"GET",headers:{Authorization:localStorage.accessToken}});case 2:return e.next=4,e.sent.json();case 4:"Unauthorized"==e.sent.message&&N.push("/");case 6:case"end":return e.stop()}}),e)}))),[]);var E=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={winnerId:"",draw:!1},t="draw"==i?Object(f.a)(Object(f.a)({},t),{},{draw:!0}):Object(f.a)(Object(f.a)({},t),{},{winnerId:i}),e.next=4,z("/v1/finishMatch",{method:"POST",body:JSON.stringify(t)});case 4:n=e.sent,T(n.message),v(!0),n.status&&window.location.reload();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{id:"",children:[Object(w.jsx)(tt,{callback:function(e){console.log("SUHAIL"),c(e)}}),n&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"fix-at-top",children:[Object(w.jsx)("div",{children:n.users[1].email}),Object(w.jsx)("div",{style:{fontWeight:"bolder"},children:Object(w.jsx)("span",{style:{border:"1px solid white",borderRadius:"5px",padding:"5px",cursor:"pointer"},onClick:function(){O(!0)},children:"Finish Game"})}),Object(w.jsx)("div",{children:n.users[0].email})]}),Object(w.jsxs)(F.a,{open:h,sx:{minWidth:"40%"},children:[Object(w.jsx)("div",{className:"float-right",onClick:function(){O(!1)},children:"X"}),Object(w.jsx)("div",{style:{display:"flex",padding:"30px 50px",justifyContent:"center"},children:Object(w.jsxs)(ge.a,{sx:{padding:"20px 10px"},children:[Object(w.jsx)("div",{className:"row",style:{marginBottom:20,border:"none"},children:Object(w.jsx)("img",{src:"https://gamingatoll.com/images/game/"+n.game.image})}),Object(w.jsx)("span",{className:"row",style:{marginBottom:20,border:"none"},children:n.game.name}),Object(w.jsxs)(fe.a,{fullWidth:!0,children:[Object(w.jsx)(xe.a,{id:"demo-simple-select-label",children:"Winner"}),Object(w.jsxs)(ve.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:i,label:"Winner",onChange:function(e){l(e.target.value)},children:[Object(w.jsx)(pe.a,{value:n.users[0]._id,children:n.users[0].email}),Object(w.jsx)(pe.a,{value:n.users[1]._id,children:n.users[1].email}),Object(w.jsx)(pe.a,{value:"draw",children:"Draw"})]})]}),Object(w.jsx)(B.a,{className:"started_btn",style:{width:"100%",margin:0,marginTop:20},onClick:E,children:"Finish Game"})]})})]})]}),p&&Object(w.jsx)(y,{open:p,message:k})]})}var at=function(){return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("main",{children:Object(w.jsxs)(o.c,{children:[Object(w.jsx)(o.a,{path:"/",exact:!0,children:Object(w.jsx)(Ze,{})}),Object(w.jsx)(o.a,{exact:!0,path:"/signin",children:Object(w.jsx)(C,{})}),Object(w.jsx)(o.a,{exact:!0,path:"/admin",children:Object(w.jsx)(nt,{})})]})})})};r.a.render(Object(w.jsx)(i.a,{children:Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(at,{})})}),document.getElementById("root"))}},[[842,1,2]]]);
//# sourceMappingURL=main.46183d6c.chunk.js.map